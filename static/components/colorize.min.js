/*!
 * # Semantic UI 2.2.2 - Colorize
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,n,i,t){"use strict";n="undefined"!=typeof n&&n.Math==Math?n:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.colorize=function(n){var i=e.isPlainObject(n)?e.extend(!0,{},e.fn.colorize.settings,n):e.extend({},e.fn.colorize.settings),o=arguments||!1;return e(this).each(function(n){var a,r,c,s,d,g,l,u,f=e(this),m=e("<canvas />")[0],h=e("<canvas />")[0],p=e("<canvas />")[0],v=new Image,w=i.colors,b=(i.paths,i.namespace),y=i.error,C=f.data("module-"+b);return u={checkPreconditions:function(){return u.debug("Checking pre-conditions"),!(!e.isPlainObject(w)||e.isEmptyObject(w))||(u.error(y.undefinedColors),!1)},async:function(e){i.async?setTimeout(e,0):e()},getMetadata:function(){u.debug("Grabbing metadata"),s=f.data("image")||i.image||t,d=f.data("name")||i.name||n,g=i.width||f.width(),l=i.height||f.height(),0!==g&&0!==l||u.error(y.undefinedSize)},initialize:function(){u.debug("Initializing with colors",w),u.checkPreconditions()&&u.async(function(){u.getMetadata(),u.canvas.create(),u.draw.image(function(){u.draw.colors(),u.canvas.merge()}),f.data("module-"+b,u)})},redraw:function(){u.debug("Redrawing image"),u.async(function(){u.canvas.clear(),u.draw.colors(),u.canvas.merge()})},change:{color:function(e,n){return u.debug("Changing color",e),w[e]===t?(u.error(y.missingColor),!1):(w[e]=n,void u.redraw())}},canvas:{create:function(){u.debug("Creating canvases"),m.width=g,m.height=l,h.width=g,h.height=l,p.width=g,p.height=l,a=m.getContext("2d"),r=h.getContext("2d"),c=p.getContext("2d"),f.append(m),a=f.children("canvas")[0].getContext("2d")},clear:function(e){u.debug("Clearing canvas"),c.fillStyle="#FFFFFF",c.fillRect(0,0,g,l)},merge:function(){return e.isFunction(a.blendOnto)?(a.putImageData(r.getImageData(0,0,g,l),0,0),void c.blendOnto(a,"multiply")):void u.error(y.missingPlugin)}},draw:{image:function(e){u.debug("Drawing image"),e=e||function(){},s?(v.src=s,v.onload=function(){r.drawImage(v,0,0),e()}):(u.error(y.noImage),e())},colors:function(){u.debug("Drawing color overlays",w),e.each(w,function(e,n){i.onDraw(c,d,e,n)})}},debug:function(e,n){i.debug&&(n!==t?console.info(i.name+": "+e,n):console.info(i.name+": "+e))},error:function(e){console.warn(i.name+": "+e)},invoke:function(n,o,a){var r;return a=a||Array.prototype.slice.call(arguments,2),"string"==typeof n&&C!==t&&(n=n.split("."),e.each(n,function(n,t){return e.isPlainObject(C[t])?(C=C[t],!0):e.isFunction(C[t])?(r=C[t],!0):(u.error(i.error.method),!1)})),!!e.isFunction(r)&&r.apply(o,a)}},C!==t&&o?("invoke"==o[0]&&(o=Array.prototype.slice.call(o,1)),u.invoke(o[0],this,Array.prototype.slice.call(o,1))):void u.initialize()}),this},e.fn.colorize.settings={name:"Image Colorizer",debug:!0,namespace:"colorize",onDraw:function(e,n,i,t){},async:!0,colors:{},metadata:{image:"image",name:"name"},error:{noImage:"No tracing image specified",undefinedColors:"No default colors specified.",missingColor:"Attempted to change color that does not exist",missingPlugin:"Blend onto plug-in must be included",undefinedHeight:"The width or height of image canvas could not be automatically determined. Please specify a height."}}}(jQuery,window,document);